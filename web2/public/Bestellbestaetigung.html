<!DOCTYPE html>
<html lang="en">

<head>
  <title>LSSD Custom Cars</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="jquery/jquery-3.5.1.min.js"></script>
  
  <script type="text/javascript" src="scripts/scripts.js"></script>
  <script src="popperJS/popper.min.js"></script>
  <script src="Bootstrap/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="css/stylesheet.css">
  <link rel="stylesheet" href="Bootstrap/css/bootstrap.min.css">

</head>

<body style="background-color: #282c34">
  
  <nav class="navbar navbar-expand-md  navbar-dark">
    <div class="navbar-brand"><a href="index.html"><img id="logo" src="img/logo.png" alt="logo.png"></a></div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="collapsibleNavbar">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="index.html">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="Konfigurator.html">Autos</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="Events.html">Events</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="Kontakt.html">Kontakt</a>
        </li>
        <li class="nav-item">
          <div class="container" id="shopping_cart">
            <img id="shopping_cart" src="./img/shopping_cart_white.png" alt="Warenkorb" data-html="true"
            data-toggle="popover" data-placement="bottom" title='<h1>Warenkorb</h1>'
            data-content="<div> <p>Audi RS3 Sportback<br><br> 
              Farbe: Tango Rot<br> Motor: 2.5 TFSI<br> Fahrwerk: KW<br> Sportfelgen: BBS<br> Update: Updatestufe 1 <br><br>  
              <B>Endpreis: 73083,48€ <br><br></B>   
              <a class='btn btn-primary' href='Bestellformular.html' role='button'>Bestellen</a> </div>">
          </div>
        </li>
      </ul>
    </div>
  </nav>

  <div class="Bestellbestaetigung_main">
        <div class="Besllung_Erfolgreich">
            <div class="row">
                <div class="col-md-1 "></div>
                <div class="col-md-10">
                    <div class="alert alert-success VielenDank" role="alert">
                        <h4 class="alert-heading">Bestellung erfolgreich abgesendet!</h4>
                        <p>Wir kümmern uns so schnell wie möglich um ihre Bestellung und Sie bekommen von uns Bescheid sobald Ihr Auto fertig gestellt ist. </p>
                        <hr>
                        <p class="mb-0 Vielen_Dank">Vielen Danke für ihre Bestllung. Einen schönen Tag wünscht Ihnen LSSD Custom Cars. </p><br><br><br><br>
                    </div>
                <div class="col-md-1"></div>
            </div>
        </div>
        <div class="Bestellbestaetigung_Rechnungsadresse ">
          <div class="row">
            <div class="col-md-1 "></div>
            <div class="col-md-4">
                <div class="bestellformular_top_spacer bestellformular_warenkorb Datenuebersicht2">
                    <h5><p class="font-weight-bold ">Rechnungsadresse:</p>
                      <ul id="myList2" class="config_price"><li>name</li><li>Basispreis</li><li>add</li><li>email</li></ul>
                    </h5>
                </div>
            </div>
            <div class="col-md-2 "></div>
            <div class="col-md-4">
              <div class="bestellformular_top_spacer bestellformular_warenkorb Datenuebersicht2 ">
                  <h5><p class="font-weight-bold ">Versandart:</p>
                    Abholung<br><br><br>
                  </h5>
              </div>
              <div class="col-md-4">
                <a id="Margin_Top_1111" class='btn btn-primary' onclick="resetCockie()" href='Konfigurator.html' role='button'>Neues Auto konfigurieren</a>
              </div>
             
            </div>
          </div>



        </div>

        <div class="Bestellbetaetigung_Bestelluebersicht">
            <div class="row">
                <div class="col-md-1 "></div>
                <div class="col-md-4">
                    <div class="bestellformular_top_spacer bestellformular_warenkorb Datenuebersicht">
                        <h5>
                          <ul id="myList1" class="config_price"><li>name</li><li>Basispreis</li><li>Titan Silber: Preis 500€</li><li>Motor: Standard  Preis: 0€</li><li>Fahrwerk: Standard  Preis: 0€</li><li>Sportfelgen: Standard  Preis: 0€</li><li>Update: Standard  Preis: 0€</li><li class="grey"><p id="endpreis" >Endpreis:  73083,48€</p></li></ul>
                        </h5>
                </div>
                <div class="col-md-1">
                  
                </div>
            </div>



        </div>

    </div>
    <footer>
      <div class="row ">
        <div class="col-md-1">
        </div>
        <div class="col-md-3">
          <p class="footer_head"><b>Über uns</b></p>
          <p class="footer_text" style="font-size:18px">
            LSSD Custom Cars ist ein junges und dynamisches Unternehmen mit dem Hauptsitz in Albstadt-Ebingen.
            Unser Unternehmen besteht aus 10 Mitarbeitern, die im Verkauf, Beratung und der Werkstatt tätig sind.
            Dabei ist es unser Ziel Ihnen ausgewählte Autos anzubieten, die sie individuell konfigurieren können.
          </p>
        </div>
        <div class="col-md-3">
          <p class="footer_head"><b>Neuigkeiten</b></p>
          <p class="footer_text" style="font-size:18px">
            Mometan können wir Ihnen auf Grund der aktuellen Lage nur ein eingeschränktes Angebot
            an Autos anbieten.<br><br>
            Wir bitten um Entschuldigung und hoffen, dass wir Ihnen bald möglichst wieder unser volles Angebot bieten können.
          </p>
        </div>
        <div class="col-md-3">
          <p class="footer_head"><b>Kontakt</b></p>
          <p class="footer_text" style="font-size:18px">
            LSSD Custom Cars<br>
            Poststraße 6<br>
            72458 Albstadt<br>
            07571/445566<br><br>
            <a href='Kontakt.html'>Kontakt/Termin</a>
            <br>
            <a href='impressum.html'>Impressum</a>
          </p>
        </div>
        <div class="col-md-2">
        </div>
      </div>
    </footer>
  <script>
    var ret ={};

    function resetCockie(){
        var date = new Date();
        date.setTime(date.getTime() + (1*24*60*60*1000));
        expires = "; expires=" + date.toUTCString();
      document.cookie =  "warenkorb" + "=" + 1 + expires;
      document.cookie =  "carID" + "=" + 1 + expires;

    }
    



    function getCookieWare() {
          console.log("getCookie ");
        var nameEQ = "warenkorb" + "=";
        var ca = document.cookie.split(';');
        for(var i=0;i < ca.length;i++) {
             var c = ca[i];
             while (c.charAt(0)==' ') c = c.substring(1,c.length);
             if (c.indexOf(nameEQ) == 0) return slideTo = c.substring(nameEQ.length,c.length);
        }
        
        return null;
    }

    var x = getCookieWare();
    
    switch (x) {
  case "1":
  var c = "<div><h5><p>Um eine Bestellung aufzugeben, klicken Sie den Button.</p> <a class='btn btn-primary' href='Konfigurator.html' role='button'>Bestellung beginnen </a> </div>"
  $('[data-toggle="popover"]').attr('data-content', c);
  break;
  case "2":
  var c = "<div><h5><p>Um eine Bestellung fort zufahren, klicken Sie den Button.</p> <a class='btn btn-primary' href='Bestellformular.html' role='button'>Bestellung fortsetzen</a> </div>"
  $('[data-toggle="popover"]').attr('data-content', c);
  break;
  case "3":
  var c = "<div><h5><p>Um eine Bestellung abzuschließen, klicken Sie den Button.</p> <a class='btn btn-primary' href='Bestellbestaetigung.html' role='button'>Bestellung abschließen</a> </div>"
  $('[data-toggle="popover"]').attr('data-content', c);
 
  break;
    }
    $(document).ready(function () {
      $('[data-toggle="popover"]').popover();

      $.ajax({
        url: "http://localhost:8000/api/config/subSelc",
        method: "get",
        dataType: "json"
      }).done(function (response) {
		ret=response.daten;
		console.log("debug 189  ++++"+ret.id);
      }).fail(function (jqXHR, statusText, error) {
        console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
		$("#Farbe").html("Ein Fehler ist aufgetreten");
		

	  });
	  
	  
	var ajaxFn = function() { 
	console.log("debug ret   "+ret.id);
      $.ajax({
          url: "http://localhost:8000/api/motor/gib/" +ret.f_id_motor,
          method: "get",
          dataType: "json"
        }).done(function (response) {
          for (var obj in response.daten) {
            if (obj != "preis") {
              var textnode = document.createTextNode(response.daten.name);
              var item = document.getElementById("myList1").childNodes[0];
            } else {
              var price = response.daten[obj].toString();
              price = response.daten.name+ "\n Preis: " + price + "€";
              
              var textnode = document.createTextNode(price);
              var item = document.getElementById("myList1").childNodes[3];
               item.replaceChild(textnode, item.childNodes[0]);
            }
           
          };
        }).fail(function (jqXHR, statusText, error) {
          console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
          $("#Farbe").html("Ein Fehler ist aufgetreten");
		});
		
		$.ajax({
          url: "http://localhost:8000/api/auto/gib/" + ret.f_id_auto,
          method: "get",
          dataType: "json"
        }).done(function (response) {
          for (var obj in response.daten) {
            if (obj != "preis") {
              var textnode = document.createTextNode(response.daten.name);
              var item = document.getElementById("myList1").childNodes[0];
               item.replaceChild(textnode, item.childNodes[0]);
            } else {
              var price = response.daten[obj].toString();
              price = "Basispreis: " + price + "€";
              
              var textnode = document.createTextNode(price);
              var item = document.getElementById("myList1").childNodes[1];
               item.replaceChild(textnode, item.childNodes[0]);
            }
           
          };
        }).fail(function (jqXHR, statusText, error) {
          console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
          $("#Farbe").html("Ein Fehler ist aufgetreten");
        });
      
		$.ajax({
          url: "http://localhost:8000/api/fahrwerk/gib/" + ret.f_id_fahrwerk,
          method: "get",
          dataType: "json"
        }).done(function (response) {
          for (var obj in response.daten) {
            if (obj != "preis") {
              var textnode = document.createTextNode(response.daten.hersteller);
              var item = document.getElementById("myList1").childNodes[0];
            } else {
              var price = response.daten[obj].toString();
              price = response.daten.hersteller+ "\n Preis: " + price + "€";
              
              var textnode = document.createTextNode(price);
              var item = document.getElementById("myList1").childNodes[4];
               item.replaceChild(textnode, item.childNodes[0]);
            }
           
          };
        }).fail(function (jqXHR, statusText, error) {
          console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
          $("#Farbe").html("Ein Fehler ist aufgetreten");
		});
		
		$.ajax({
          url: "http://localhost:8000/api/farbe/gib/" + ret.f_id_farbe,
          method: "get",
          dataType: "json"
        }).done(function (response) {
          for (var obj in response.daten) {
            if (obj != "preis") {
              var textnode = document.createTextNode(response.daten.name);
              var item = document.getElementById("myList1").childNodes[3];
            } else {
              var price = response.daten[obj].toString();
              price = response.daten.name+ "\n Preis: " + price + "€";
              
              var textnode = document.createTextNode(price);
              var item = document.getElementById("myList1").childNodes[2];
               item.replaceChild(textnode, item.childNodes[0]);
              
            }
          };
        }).fail(function (jqXHR, statusText, error) {
          console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
          $("#Farbe").html("Ein Fehler ist aufgetreten");
        });

		$.ajax({
          url: "http://localhost:8000/api/sportfelgen/gib/" + ret.f_id_felgen,
          method: "get",
          dataType: "json"
        }).done(function (response) {
          
          for (var obj in response.daten) {
            if (obj != "preis") {
              var textnode = document.createTextNode(response.daten.hersteller);
              var item = document.getElementById("myList1").childNodes[0];
            } else {
              var price = response.daten[obj].toString();
              price = response.daten.hersteller+ "\n Preis: " + price + "€";
              var textnode = document.createTextNode(price);
              var item = document.getElementById("myList1").childNodes[5];
               item.replaceChild(textnode, item.childNodes[0]); 
            }
          };
        }).fail(function (jqXHR, statusText, error) {
          console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
          $("#Felgen").html("Ein Fehler ist aufgetreten");
        });
		$.ajax({
          url: "http://localhost:8000/api/update/gib/" + ret.f_id_update,
          method: "get",
          dataType: "json"
        }).done(function (response) {
          for (var obj in response.daten) {
            if (obj != "preis") {
              var textnode = document.createTextNode(response.daten.name);
              var item = document.getElementById("myList1").childNodes[0];
            } else {
              var price = response.daten[obj].toString();
              price = response.daten.name+ "\n Preis: " + price + "€";
              
              var textnode = document.createTextNode(price);
              var item = document.getElementById("myList1").childNodes[6];
               item.replaceChild(textnode, item.childNodes[0]);
            }
           
          };
        }).fail(function (jqXHR, statusText, error) {
          console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
          $("#update").html("Ein Fehler ist aufgetreten");
		});
		

		$.ajax({
          url: "http://localhost:8000/api/config/getPreis/" + ret.id,
          method: "get",
          dataType: "json"
        }).done(function (response) {
          for (var obj in response.daten) {
            if (obj != "preis") {
              var textnode = document.createTextNode(response.daten.name);
              var item = document.getElementById("myList1").childNodes[0];
            } else {
              var price = response.daten[obj].toString();
              price =  "Endpreis: " + price + "€";
              var textnode = document.createTextNode(price);
              var item = document.getElementById("myList1").childNodes[7];
               item.replaceChild(textnode, item.childNodes[0]);
            }
          };
        }).fail(function (jqXHR, statusText, error) {
          console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
          $("#update").html("Ein Fehler ist aufgetreten");
        });

        $.ajax({
          url: "http://localhost:8000/api/config_besteller/subSelc/",
          method: "get",
          dataType: "json"
        }).done(function (response) {
        console.log(response.daten.Vname+" "+response.daten.name)
          var textnode = document.createTextNode(response.daten.vname+" "+response.daten.name);
          var item = document.getElementById("myList2").childNodes[0];
          item.replaceChild(textnode, item.childNodes[0]);
          var textnode = document.createTextNode(response.daten.adr);
          var item = document.getElementById("myList2").childNodes[1];
          item.replaceChild(textnode, item.childNodes[0]);
          var textnode = document.createTextNode(response.daten.email);
          var item = document.getElementById("myList2").childNodes[2];
          item.replaceChild(textnode, item.childNodes[0]);
          var textnode = document.createTextNode(response.daten.plz +" "+ response.daten.ort);
          var item = document.getElementById("myList2").childNodes[3];
          item.replaceChild(textnode, item.childNodes[0]);
        }).fail(function (jqXHR, statusText, error) {
          console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
          $("#update").html("Ein Fehler ist aufgetreten");
        });
  }
  setTimeout(ajaxFn,500); 
    });
  </script>
</body>

</html>