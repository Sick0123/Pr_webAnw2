<!DOCTYPE html>
<html lang="en">

<head>
  <title>LSSD Custom Cars</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="jquery/jquery-3.5.1.min.js"></script>
  <link rel="stylesheet" href="css/stylesheet.css">
  <script type="text/javascript" src="scripts/scripts.js"></script>
  <script src="popperJS/popper.min.js"></script>
  <script src="Bootstrap/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="Bootstrap/css/bootstrap.min.css">
</head>

<body style="background-color: #282c34">

  <nav class="navbar navbar-expand-md  navbar-dark">
    <div class="navbar-brand"><a href="index.html"><img id="logo" src="img/logo.png" alt="logo.png"></a></div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="collapsibleNavbar">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="index.html">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="Konfigurator.html">Autos</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="Events.html">Events</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="Kontakt.html">Kontakt</a>
        </li>
        <li class="nav-item">
          <div class="container" id="shopping_cart">
            <img id="shopping_cart" src="./img/shopping_cart_white.png" alt="Warenkorb" data-html="true"
              data-toggle="popover" data-placement="bottom" title='<h1>Warenkorb</h1>' data-content="<div> <p>Audi RS3 Sportback<br><br> 
              Farbe: Tango Rot<br> Motor: 2.5 TFSI<br> Fahrwerk: KW<br> Sportfelgen: BBS<br> Update: Updatestufe 1 <br><br>  
              <B>Endpreis: 73083,48€ <br><br></B>   
              <a class='btn btn-primary' href='Bestellformular.html' role='button'>Bestellen</a> </div>">
          </div>
        </li>
      </ul>
    </div>
  </nav>
  <div class="container config_margin_footer config ">
    <div class="row config_margin_carousel">
      <div class="col-md-12 ">
        <div id="carouselExampleControls" class="carousel " data-interval="false" data-ride="carousel">
          <div class="carousel-inner">
            <div id="2" class="carousel-item active">
              <img src="./img/slideshow_911.jpg" class="d-block w-100" alt="...">
            </div>
            <div id="1" class="carousel-item">
              <img src="./img/slideshow_corvette.jpg" class="d-block w-100" alt="...">
            </div>
            <div id="3" class="carousel-item">
              <img src="./img/slideshow_skyline.jpg" class="d-block w-100" alt="...">
            </div>
          </div>
          <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
      </div>
    </div>
    <div class="row" hidden>
      <div class="col-md-12 alert alert-danger config_margin_alert d-flex justify-content-center" id="config_red"
        role="alert">
        <p>Diese Konfiguration ist leider nicht möglich.</p>
      </div>
      <div class="col-md-1">

      </div>

    </div>
    <div class="row config_margin_alert ">
      <div class="col-md-2 offset-md-2">
        <div class="config_kat">
          <p>Farbe:</p>
          <p>Motor:</p>
          <p>Fahrwerk:</p>
          <p>Sportfelgen:</p>
          <p>Update:</p>
        </div>
      </div>
      <div class="col-md-2 ">
        <div>
          <select class="config_cars " id="Farbe">
          </select>
        </div>
        <div id="progress_bar_add_motor" class="progress config_margin_processbar">
          <div class="progress-bar bg-success " role="progressbar" style="width: 50%" aria-valuenow="15"
            aria-valuemin="0" aria-valuemax="100"></div>

        </div>
        <div class="progress config_margin_processbar">
          <div class="progress-bar bg-success" role="progressbar" style="width: 50%" aria-valuenow="15"
            aria-valuemin="0" aria-valuemax="100"></div>
          <div class="progress-bar bg-danger" role="progressbar" style="width: 15%" aria-valuenow="20" aria-valuemin="0"
            aria-valuemax="100"></div>
        </div>
        <div class="progress config_margin_processbar">
          <div class="progress-bar bg-success" role="progressbar" style="width: 50%" aria-valuenow="15"
            aria-valuemin="0" aria-valuemax="100"></div>
          <div class="progress-bar bg-danger" role="progressbar" style="width: 15%" aria-valuenow="20" aria-valuemin="0"
            aria-valuemax="100"></div>
        </div>
        <div class="progress config_margin_processbar">
          <div class="progress-bar bg-success" role="progressbar" style="width: 50%" aria-valuenow="15"
            aria-valuemin="0" aria-valuemax="100"></div>
          <div class="progress-bar bg-danger" role="progressbar" style="width: 15%" aria-valuenow="20" aria-valuemin="0"
            aria-valuemax="100"></div>
        </div>
      </div>
      <div class="col-md-2 offset-md-1">
        <div class="config_placeholder">

        </div>
        <div class="config_margin_processbar">
          <select class="config_cars " id="Motor">
          </select>
        </div>
        <div class="config_margin_processbar">
          <select class="config_cars" id="Fahrwerk">

          </select>
        </div>
        <div class="config_margin_processbar">
          <select class="config_cars" id="Felgen">
          </select>
        </div>
        <div class="config_margin_processbar">
          <select class="config_cars " id="update">
          </select>
        </div>
      </div>
      
      <div class="col-md-3 ">
       
        <div class="config_columns">
          <ul id="myList1" class="config_price"><li>name</li><li>Basispreis</li><li>Titan Silber: Preis 500€</li><li>Motor: Standard  Preis: 0€</li><li>Fahrwerk: Standard  Preis: 0€</li><li>Sportfelgen: Standard  Preis: 0€</li><li>Update: Standard  Preis: 0€</li><li class="grey"><p id="endpreis" >Endpreis:  73083,48€</p><a href="" class=" btn btn-primary ">In Warenkorb</a><a href="./Bestellformular.html" class=" btn btn-success ">Bestellen</a></li></ul>
        </div>
      </div>


    </div>
  </div>




  <footer>
    <div class="row ">
      <div class="col-md-1">
      </div>
      <div class="col-md-3">
        <p class="footer_head"><b>Über uns</b></p>
        <p class="footer_text" style="font-size:18px">
          LSSD Custom Cars ist ein junges und dynamisches Unternehmen mit dem Hauptsitz in Albstadt-Ebingen.
          Unser Unternehmen besteht aus 10 Mitarbeitern, die im Verkauf, Beratung und der Werkstatt tätig sind.
          Dabei ist es unser Ziel Ihnen ausgewählte Autos anzubieten, die sie individuell konfigurieren können.
        </p>
      </div>
      <div class="col-md-3">
        <p class="footer_head"><b>Neuigkeiten</b></p>
        <p class="footer_text" style="font-size:18px">
          Mometan können wir Ihnen auf Grund der aktuellen Lage nur ein eingeschränktes Angebot
          an Autos anbieten.<br><br>
          Wir bitten um Entschuldigung und hoffen, dass wir Ihnen bald möglichst wieder unser volles Angebot bieten
          können.
        </p>
      </div>
      <div class="col-md-3">
        <p class="footer_head"><b>Kontakt</b></p>
        <p class="footer_text" style="font-size:18px">
          LSSD Custom Cars<br>
          Poststraße 6<br>
          72458 Albstadt<br>
          07571/445566<br><br>
          <a href='Kontakt.html'>Kontakt/Termin</a>
          <br>
          <a href='impressum.html'>Impressum</a>
        </p>
      </div>
      <div class="col-md-2">
      </div>
    </div>
  </footer>
  <script>
    var totalcost = {};
    $(document).ready(function () {
      $('[data-toggle="popover"]').popover();
    });

    $(document).ready(function () {
      $.ajax({
        url: "http://localhost:8000/api/auto/gib/0",
        method: "get",
        dataType: "json"
      }).done(function (response) {
        var ul = document.getElementById("myList1");
        totalcost["basispreis"] = response.daten.preis;
          for (var obj in response.daten) {
            if (obj != "preis") {
              var textnode = document.createTextNode(response.daten.name);
              var item = document.getElementById("myList1").childNodes[0];
               item.replaceChild(textnode, item.childNodes[0]);
            } else {
              var price = response.daten[obj].toString();
              price = "Basispreis: " + price + "€";
              
              var textnode2 = document.createTextNode(price);
              var item = document.getElementById("myList1").childNodes[1];
              item.replaceChild(textnode2, item.childNodes[0]);
              
              
              var price = response.daten[obj]+500;
              price2 = "Basispreis: " + price + "€";
              var textnode = document.createTextNode(price2);
              var item2 = document.getElementById("myList1").childNodes[7];
              item2.replaceChild(textnode, item2.childNodes[0]);
            }
        };

      }).fail(function (jqXHR, statusText, error) {
        console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
        $("#Farbe").html("Ein Fehler ist aufgetreten");
      });


      $('#text_slideshow').html($('.active > .carousel-caption').html());
      $('.carousel').on('slid.bs.carousel', function (e) {
        var slideFrom = $(this).find('.active').index();
        var slideTo = $(e.relatedTarget).index();
        
        $.ajax({
          url: "http://localhost:8000/api/auto/gib/" + slideFrom,
          method: "get",
          dataType: "json"
        }).done(function (response) {
          totalcost["basispreis"] = response.daten.preis;
          for (var obj in response.daten) {
            if (obj != "preis") {
              var textnode = document.createTextNode(response.daten.name);
              var item = document.getElementById("myList1").childNodes[0];
               item.replaceChild(textnode, item.childNodes[0]);
            } else {
              var price = response.daten[obj].toString();
              price = "Basispreis: " + price + "€";
              
              var textnode = document.createTextNode(price);
              var item = document.getElementById("myList1").childNodes[1];
               item.replaceChild(textnode, item.childNodes[0]);
            }
           
          };
          sumTotal();
        }).fail(function (jqXHR, statusText, error) {
          console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
          $("#Farbe").html("Ein Fehler ist aufgetreten");
        });
      });

    });

    
    $("#Farbe").ready(function () {
      console.log("button geterror clicked");

      $.ajax({
        url: "http://localhost:8000/api/farbe/dropDown",
        method: "get",
        dataType: "json"
      }).done(function (response) {
        totalcost["farbe"] = response.daten[0].preis;
        $.each(response.daten, function (key, value) {
          $("#Farbe").append($('<option></option>').val(value.id_farbe).text(value.name));
          console.log(document.getElementById("Farbe").value);
        });
      }).fail(function (jqXHR, statusText, error) {
        console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
        $("#Farbe").html("Ein Fehler ist aufgetreten");
      });
    });
    $("#Motor").ready(function () {
      console.log("button geterror clicked");

      $.ajax({
        url: "http://localhost:8000/api/motor/dropDown",
        method: "get",
        dataType: "json"
      }).done(function (response) {
        totalcost["motor"] = response.daten[0].preis;
        $.each(response.daten, function (key, value) {
          $("#Motor").append($('<option></option>').val(value.id_motor).text(value.name));
          console.log(document.getElementById("Motor").value);

          // $("#Motor").append($('<div class="progress-bar bg-danger" role="progressbar" style="width: 15%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>'));
          // console.log(document.getElementById("Motor").value);


        });
      }).fail(function (jqXHR, statusText, error) {
        console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
        $("#Motor").html("Ein Fehler ist aufgetreten");
      });
    });
    $('#Motor').change(function(){
      var m_id = $('#Motor').val();
      $.ajax({
          url: "http://localhost:8000/api/motor/gib/" + m_id,
          method: "get",
          dataType: "json"
        }).done(function (response) {
          totalcost["motor"] = response.daten.preis;
          for (var obj in response.daten) {
            if (obj != "preis") {
              var textnode = document.createTextNode(response.daten.name);
              var item = document.getElementById("myList1").childNodes[0];
              //  item.replaceChild(textnode, item.childNodes[0]);
            } else {
              var price = response.daten[obj].toString();
              price = response.daten.name+ "\n Preis: " + price + "€";
              
              var textnode = document.createTextNode(price);
              var item = document.getElementById("myList1").childNodes[3];
               item.replaceChild(textnode, item.childNodes[0]);
            }
           
          };
          sumTotal();
        }).fail(function (jqXHR, statusText, error) {
          console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
          $("#Farbe").html("Ein Fehler ist aufgetreten");
        });
    })



    $("#Fahrwerk").ready(function () {
      console.log("button geterror clicked");

      $.ajax({
        url: "http://localhost:8000/api/fahrwerk/dropDown",
        method: "get",
        dataType: "json"
      }).done(function (response) {
        console.log("testing" + response.daten[0].preis);
        totalcost["fahrwerk"] = response.daten[0].preis;
        $.each(response.daten, function (key, value) {
          $("#Fahrwerk").append($('<option></option>').val(value.id_fahrwerk).text(value.hersteller));
          
        });
      }).fail(function (jqXHR, statusText, error) {
        console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
        $("#Fahrwerk").html("Ein Fehler ist aufgetreten");
      });
    });
    $('#Fahrwerk').change(function(){
      var f_id = $('#Fahrwerk').val();
      $.ajax({
          url: "http://localhost:8000/api/fahrwerk/gib/" + f_id,
          method: "get",
          dataType: "json"
        }).done(function (response) {
          totalcost["fahrwerk"] = response.daten.preis;
          for (var obj in response.daten) {
            if (obj != "preis") {
              var textnode = document.createTextNode(response.daten.hersteller);
              var item = document.getElementById("myList1").childNodes[0];
              //  item.replaceChild(textnode, item.childNodes[0]);
            } else {
              var price = response.daten[obj].toString();
              price = response.daten.hersteller+ "\n Preis: " + price + "€";
              
              var textnode = document.createTextNode(price);
              var item = document.getElementById("myList1").childNodes[4];
               item.replaceChild(textnode, item.childNodes[0]);
            }
           
          };
          sumTotal();
        }).fail(function (jqXHR, statusText, error) {
          console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
          $("#Farbe").html("Ein Fehler ist aufgetreten");
        });
    });
    $('#Farbe').change(function(){
      var f_id = $('#Farbe').val();
      $.ajax({
          url: "http://localhost:8000/api/farbe/gib/" + f_id,
          method: "get",
          dataType: "json"
        }).done(function (response) {
          totalcost["farbe"] = response.daten.preis;
          for (var obj in response.daten) {
            if (obj != "preis") {
              var textnode = document.createTextNode(response.daten.name);
              var item = document.getElementById("myList1").childNodes[3];
              //  item.replaceChild(textnode, item.childNodes[0]);
            } else {
              var price = response.daten[obj].toString();
              price = response.daten.name+ "\n Preis: " + price + "€";
              
              var textnode = document.createTextNode(price);
              var item = document.getElementById("myList1").childNodes[2];
               item.replaceChild(textnode, item.childNodes[0]);
              
            }
          };
          sumTotal();

        }).fail(function (jqXHR, statusText, error) {
          console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
          $("#Farbe").html("Ein Fehler ist aufgetreten");
        });
    });
    $('#Felgen').change(function(){
      var f_id = $('#Felgen').val();
      $.ajax({
          url: "http://localhost:8000/api/sportfelgen/gib/" + f_id,
          method: "get",
          dataType: "json"
        }).done(function (response) {
          
          for (var obj in response.daten) {
            if (obj != "preis") {
              var textnode = document.createTextNode(response.daten.hersteller);
              var item = document.getElementById("myList1").childNodes[0];
              //  item.replaceChild(textnode, item.childNodes[0]);
            } else {
              totalcost["felgen"] = response.daten[obj];
              var price = response.daten[obj].toString();
              price = response.daten.hersteller+ "\n Preis: " + price + "€";
              
              var textnode = document.createTextNode(price);
              var item = document.getElementById("myList1").childNodes[5];
               item.replaceChild(textnode, item.childNodes[0]);

             
            }
           
          };
        sumTotal();
        }).fail(function (jqXHR, statusText, error) {
          console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
          $("#Felgen").html("Ein Fehler ist aufgetreten");
        });
    });
    $('#update').change(function(){
      var f_id = $('#update').val();
      $.ajax({
          url: "http://localhost:8000/api/update/gib/" + f_id,
          method: "get",
          dataType: "json"
        }).done(function (response) {
          totalcost["updage"] = response.daten.preis;
          for (var obj in response.daten) {
            if (obj != "preis") {
              var textnode = document.createTextNode(response.daten.name);
              var item = document.getElementById("myList1").childNodes[0];
              //  item.replaceChild(textnode, item.childNodes[0]);
            } else {
              var price = response.daten[obj].toString();
              price = response.daten.name+ "\n Preis: " + price + "€";
              
              var textnode = document.createTextNode(price);
              var item = document.getElementById("myList1").childNodes[6];
               item.replaceChild(textnode, item.childNodes[0]);
            }
           
          };
          sumTotal();
        }).fail(function (jqXHR, statusText, error) {
          console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
          $("#update").html("Ein Fehler ist aufgetreten");
        });
    });


    $("#update").ready(function () {
      console.log("button geterror clicked");

      $.ajax({
        url: "http://localhost:8000/api/update/dropDown",
        method: "get",
        dataType: "json"
      }).done(function (response) {
        totalcost["update"] = response.daten[0].preis;
        $.each(response.daten, function (key, value) {
          $("#update").append($('<option></option>').val(value.id_update).text(value.name));
          console.log(document.getElementById("update").value);
        });
      
      }).fail(function (jqXHR, statusText, error) {
        console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
        $("#update").html("Ein Fehler ist aufgetreten");
      });
    });
    $("#Felgen").ready(function () {
      console.log("button geterror clicked");

      $.ajax({
        url: "http://localhost:8000/api/sportfelgen/DropDown",
        method: "get",
        dataType: "json"
      }).done(function (response) {
        totalcost["felgen"] = response.daten[0].preis;
        $.each(response.daten, function (key, value) {
          $("#Felgen").append($('<option></option>').val(value.id_felgen).text(value.hersteller));
          console.log(document.getElementById("Felgen").value);
        });
      }).fail(function (jqXHR, statusText, error) {
        console.log("Response Code: " + jqXHR.status + " - Fehlermeldung: " + jqXHR.responseText);
        $("#Felgen").html("Ein Fehler ist aufgetreten");
      });
    });

    function sumTotal(){
      var sum = 0;
      for(var elem in totalcost){
        sum += parseInt(totalcost[elem]);
      };
      console.log(totalcost);
      
      var textnode = document.createTextNode("Endpreis: "+sum +"€");
      var item = document.getElementById("myList1").childNodes[7];
      item.replaceChild(textnode, item.childNodes[0]);
    };






  </script>
</body>

</html>